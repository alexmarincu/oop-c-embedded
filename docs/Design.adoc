= Design
:sectnums:
:imagesdir: media

[plantuml, target=diag-overview]
.Design overview
----
skinparam linetype ortho
package lib {
    package timer {
        object Timer
        object TimeSource
        Timer -r-> TimeSource
    }
    package observer {
        object Observer
        object Subject
        Subject -r-> "0..*" Observer
    }
}
package motion_detector {
    object AccDriver
    object AccCtrl
    AccCtrl -r-> AccDriver
}
package acc_configurator {
    object ButtonDriver
    object AccConfigurator
    object AccConfigDataSource
    AccConfigurator -r-> ButtonDriver
    AccConfigurator -r-> AccConfigDataSource
}
package acc_persistent_data {
    object AccConfig
    AccConfig -u-|> Subject
    AccConfig -u-|> AccConfigDataSource
}
package acc_driver {
    object AccDriverSwitch
    object PlatformAccDriver
    object PlatformAccSimDriver
    PlatformAccDriver -u-|> AccDriver
    PlatformAccSimDriver -u-|> AccDriver
    AccDriverSwitch -u-|> Observer
    AccDriverSwitch -r-> AccConfig
    AccDriverSwitch -u-> AccCtrl
    AccDriverSwitch -r-> PlatformAccDriver
    AccDriverSwitch -r-> PlatformAccSimDriver
}
package button_driver {
    object PlatformButtonDriver
    PlatformButtonDriver -u-|> ButtonDriver
}
package os {
    object Os_Interrupts
    object Os_KeyHandler
    object Os_Scheduler
    object Os_Task
    object Os_Time
    object Os
    Os -r-> Os_KeyHandler
    Os -r-> Os_Scheduler
    Os .u.> AccConfig
    Os .u.> AccCtrl
    Os .u.> AccDriverSwitch
    Os .u.> AccConfigurator
    Os .u.> PlatformButtonDriver
    Os .r.> Os_Task
    Os .r.> Os_Time
    Os .u.> PlatformAccDriver
    Os .u.> PlatformAccSimDriver
    Os .u.> TimeSource
    Os .u.> Timer
    Os_Scheduler -u-> AccCtrl
    Os_Scheduler -u-> AccConfigurator
    Os_Scheduler -r-> Os_Task
    Os_KeyHandler -r-> Os
    Os_KeyHandler .r.> Os_Interrupts
    Os_Interrupts .u.> PlatformButtonDriver
    Os_Interrupts .u.> PlatformAccDriver
    Os_Interrupts .u.> PlatformAccSimDriver
    Os_Task -r-> Os_Time
    Os_Time -u-|> TimeSource
}
----
